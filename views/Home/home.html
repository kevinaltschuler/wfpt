{% extends 'layout.html' %}
{% import "../bootstrap-helpers/media/carousel/carousel.html" as carousel %}
{% from "./press-card.html" import pressCard %}

{% block body %}
    {{ super() }}
    <div id='wfpt-home'>
        <div id="header-component" class="header-block">
            <div class="home-text">
                <div class="text">
                    Waterfowlers Film and Photo Tour
                </div>
                <div class="details">
                    The Premiere Site for Waterfowling
                </div>
            </div>
            <div style="align-self: center; flex-grow: 1; display: flex; justify-content: center;">
                <button class="home-play-button" onclick="switchToVideo()">
                    <i class="material-icons">play_arrow</i>
                </button>
            </div>

            <div id="carouselMain" class="carousel carousel-fade" data-ride="carousel">
              <div class="carousel-inner" role="listbox">
                <div class="carousel-item active" style="background-image: url('/img/1.jpg');"></div>
                <div class="carousel-item" style="background-image: url('/img/2.jpg');"></div>
                <div class="carousel-item" style="background-image: url('/img/3.jpg');"></div>
                <div class="carousel-item" style="background-image: url('/img/4.jpg');"></div>
                <div class="carousel-item" style="background-image: url('/img/5.jpg');"></div>
                <div class="carousel-item" style="background-image: url('/img/moon.jpg');"></div>
                <div class="carousel-item" style="background-image: url('/img/sunset.jpg');"></div>
              </div>
            </div>

            <div class="dark-overlay"></div>
        </div>

        <script>
            function switchToVideo() {
                $('#header-component').append('\
                    <div id="header-component" class="header-block" style="background-image: url(\'/img/bird1.jpg\'); z-index: 10;">\
                        <iframe style="align-self: center; z-index: 10; height: 100%; width: 100%; max-width: 800px;" src="https://player.vimeo.com/video/65936668" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\
                        <button class="close-button" onclick="switchBack()"><i class="material-icons">close</i></button>\
                        <div class="dark-overlay"></div>\
                    </div>\
                ')
                $('#header-component > .dark-overlay').css('opacity', '.8');
            }
            function switchBack() {
                $('#header-component').replaceWith('\
                    <div id="header-component" class="header-block">\
                        <div class="home-text">\
                            <div class="text">\
                                Waterfowlers Film and Photo Tour\
                            </div>\
                            <div class="details">\
                                The Premiere Site for Waterfowling\
                            </div>\
                        </div>\
                        <div style="align-self: center; flex-grow: 1; display: flex; justify-content: center;">\
                            <button class="home-play-button" onclick="switchToVideo()">\
                                <i class="material-icons">play_arrow</i>\
                            </button>\
                        </div>\
                        <div id="carouselMain" class="carousel carousel-fade" data-ride="carousel">\
                          <div class="carousel-inner" role="listbox">\
                            <div class="carousel-item active" style="background-image: url(' + "'/img/1.jpg'" + ');"></div>\
                            <div class="carousel-item" style="background-image: url(' + "'/img/2.jpg'" + ');"></div>\
                            <div class="carousel-item" style="background-image: url(' + "'/img/3.jpg'" + ');"></div>\
                            <div class="carousel-item" style="background-image: url(' + "'/img/4.jpg'" + ');"></div>\
                            <div class="carousel-item" style="background-image: url(' + "'/img/5.jpg'" + ');"></div>\
                            <div class="carousel-item" style="background-image: url(' + "'/img/moon.jpg'" + ');"></div>\
                            <div class="carousel-item" style="background-image: url(' + "'/img/sunset.jpg'" + ');"></div>\
                          </div>\
                        </div>\
                        <div class="dark-overlay"></div>\
                    </div>\
                ')
            }
            $('.carousel').carousel({
              interval: 6000,
              pause: false
            })
        </script>

        {% for block in blocks %}
            {% if loop.index % 2 == 1 %}
                {{
                    contentBlock(
                        title=block.title,
                        content=block.content,
                        extraClass="odd"
                    )
                }}
            {% else %}
                {{
                    contentBlock(
                        title=block.title,
                        content=block.content,
                        extraClass="even"
                    )
                }}
            {% endif %}
        {% endfor %}

        <div class='content-block'>
            <h3 class="title">
                Who's talking about us?
            </h3>
            <div class="content even" style="display: flex; flex-wrap: wrap; justify-content: space-between;">
                {% for press in presses %}
                    {{  pressCard(press)  }}
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
