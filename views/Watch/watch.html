{% extends 'layout.html' %}
{% from "./trailer-card-youtube.html" import trailerCardYoutube %}
{% from "./trailer-card-vimeo.html" import trailerCardVimeo %}
{% from "./trailer-card-img.html" import trailerCardImage %}


{% block body %}
{{ super() }}
<div>
    {% set demoImageSrc = 'url("http://betoclock.com/wp-content/uploads/2015/11/lolstaples-1024x544.jpg")' %}
    {{ headerBlock(image=demoImageSrc, text="Latest Tour Flix") }}
    <div class="content-block even trailers-list">
        {% set regExpVimeo = r/vimeo/g %}
        {% set regExpYoutube = r/youtube|youtu\.be/g %}
        {% for trailer in trailers %}
            {% if regExpVimeo.test(trailer.link) %}
                {{  trailerCardVimeo(trailer)  }}
            {% elif regExpYoutube.test(trailer.link) %}
                {{ trailerCardYoutube(trailer) }}
            {% else %}
                {{ trailerCardImage(trailer) }}
            {% endif %}
        {% endfor %}
    </div>
</div>

{% endblock %}
